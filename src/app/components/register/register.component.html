<section class="shadow py-2 rounded-2 container my-3">
    <h1 class="h2 text-main m-2">Register NOW</h1>
     
    <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
        <div class="my-2">
            <label for="name">Name</label>
            <input [ngClass]="{
            'is-valid': !registerForm.get('name')?.errors && registerForm.get('name')?.touched,
            'is-invalid': registerForm.get('name')?.errors && registerForm.get('name')?.touched
            }" id="name" type="text" class="form-control" formControlName = "name">


            @if (registerForm.get('name')?.errors && registerForm.get('name')?.touched ) 
            {
                <div class="alert alert-danger mt-2">
                    @if (registerForm.get('name')?.getError('required')) {
                        <p class="m-0">Name Is Required</p>
                    }

                @else if (registerForm.get('name')?.getError('minlength'))
                {
                        <p class="m-0">Name Should Be More Than Or Equal 3 Chars</p>
                    
                }
                @else if (registerForm.get('name')?.getError('maxlength'))
                {
                        <p class="m-0">Name Should Be less Than Or Equal 30 Chars</p>
                    
                }
                </div>
                
            }
        </div>
        <div class="my-2">
            <label for="email">Email</label>
            <input [ngClass]="{
                'is-valid': !registerForm.get('email')?.errors && registerForm.get('email')?.touched,
                'is-invalid': registerForm.get('email')?.errors && registerForm.get('email')?.touched
                }" id="email" type="email" class="form-control" formControlName = "email">
            @if (registerForm.get('email')?.errors && registerForm.get('email')?.touched) {
                <div class="alert alert-danger mt-2">
                    @if (registerForm.get('email')?.getError('required')) {
                        <p class="m-0">Email Is Required</p>
                    }
                    @else if (registerForm.get('email')?.getError('email')) {
                        <p class="m-0">Email not Valid</p>
                        <p class="m-0">example&#64;xxxx.com</p>
                    }
                </div>
            }
        </div>
        <div class="my-2">
            <label for="phone">Phone</label>
            <input [ngClass]="{
                'is-valid': !registerForm.get('phone')?.errors && registerForm.get('phone')?.touched,
                'is-invalid': registerForm.get('phone')?.errors && registerForm.get('phone')?.touched
                }" id="phone" type="tel" class="form-control" formControlName = "phone">
            @if (registerForm.get('phone')?.errors && registerForm.get('phone')?.touched) 
            {
                <div class="alert alert-danger mt-2 m">
                    @if (registerForm.get('phone')?.getError('required')) {
                        <p class="m-0">Phone Is Required</p>
                    }
                    @else if(registerForm.get('phone')?.getError('pattern')) {
                        <p class="m-0">Phone Not Valied</p>
                        <p class="m-0">Example: 01010101010</p>
                    }
                </div>
            }
        </div>
        <div class="my-2">
            <label for="password">Password</label>
            <input [ngClass]="{
                'is-valid': !registerForm.get('password')?.errors && registerForm.get('password')?.touched,
                'is-invalid': registerForm.get('password')?.errors && registerForm.get('password')?.touched
                }" id="password" type="password" class="form-control" formControlName = "password">

            @if (registerForm.get('password')?.errors && registerForm.get('password')?.touched) 
            {
                <div class="alert alert-danger mt-2">
                    @if (registerForm.get('password')?.getError('required')) {
                        <p class="m-0">Password Is Required</p>
                    }
                    @else if(registerForm.get('password')?.getError('pattern')) {
                        <p class="m-0">Password Should be more than or equal 6 chars</p>
                        
                    }
                </div>
            }
        </div>
        <div class="my-2">
            <label for="rePassword">RePassword</label>
            <input [ngClass]="{
                'is-valid': !registerForm.getError('mismatch')&&registerForm.get('rePassword')?.touched,
                'is-invalid': registerForm.getError('mismatch')&&registerForm.get('rePassword')?.touched
                }" id="rePasword" type="password" class="form-control" formControlName = "rePassword">
            @if (registerForm.getError('mismatch')&&registerForm.get('rePassword')?.touched) {
                <p class="alert alert-danger m-0">Password Confrmation Incorrect</p>
            }
        </div>

        <button [disabled]="registerForm.invalid  || isloading" class="btn-main mx-auto d-block mt-3">
            Register
            @if (isloading) {
                <i class="fas fa-spin fa-spinner"></i>
            }
        
        </button>

        @if (messageError) {
            <p class="alert alert-danger m-0 mt-2">{{messageError}}</p>

        }

    </form>

</section>